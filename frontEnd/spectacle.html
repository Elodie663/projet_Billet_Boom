<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spectacle - Billet Boom</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <header>
      <nav class="navbar">
        <ul>
          <li><a href="index.html">Accueil</a></li>
          <li><a href="cinema.html">Cinéma</a></li>
          <li><a href="concert.html">Concert</a></li>
          <li><a href="festival.html">Festival</a></li>
          <li><a href="humour.html">Humours</a></li>
          <li><a href="spectacle.html">Spectacle</a></li>
          <li><a href="sport.html">Sport</a></li>
          <li><a href="theatre.html">Théâtre</a></li>
          <li><a href="login.html">Connexion</a></li>
          <li><a href="register.html">S'inscrire</a></li>
          <li><a href="deconnexion.html">Déconnexion</a></li>
        </ul>
      </nav>
    </header>

    <div class="container my-5">
      <h1>Spectacle</h1>
      <div id="spectacles" class="row"></div>
    </div>

    <script>
      const container = document.getElementById("spectacles");

      async function chargerSpectacles() {
        const response = await fetch("http://localhost:3000/spectacle");
        const spectacles = await response.json();

        spectacles.forEach((spectacle) => {
          const card = document.createElement("div");
          card.className = "card col-md-4 mb-3";

          const cardBody = document.createElement("div");
          cardBody.className = "card-body";

          const titre = document.createElement("h5");
          titre.textContent = spectacle.title;
          cardBody.appendChild(titre);

          const lieu = document.createElement("p");
          lieu.textContent = spectacle.place;
          cardBody.appendChild(lieu);

          const prix = document.createElement("p");
          prix.textContent = spectacle.price + "€";
          cardBody.appendChild(prix);

          const button = document.createElement("button");
          button.textContent = "Acheter un billet";
          button.className = "btn btn-primary mt-2";

          button.addEventListener("click", () => {
            alert(
              `Félicitations ! Vous avez acheté un billet pour : ${spectacle.title}`
            );
          });
          card.appendChild(cardBody);
          cardBody.appendChild(button);
          container.appendChild(card);
        });
      }

      chargerSpectacles();

      //pouir afficher le nom de l'utilisateur connecté

      const user = JSON.parse(localStorage.getItem("user"));
      if (user) {
        const li = document.createElement("li");
        li.style.color = "white";
        li.textContent = user.name;
        document.querySelector("nav ul").appendChild(li);
      }
    </script>

    <footer class="footer">
      <p>&copy; 2025 Billet Boom — Tous droits réservés.</p>
    </footer>
  </body>
</html>
